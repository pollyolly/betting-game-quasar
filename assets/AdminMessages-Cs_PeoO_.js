import{r,x as j,y as Q,z as s,B as o,L as h,C as g,Q as x,X as O,M as p,U,V as le,D as se,k as G,K as N,J as ne,n as ae,W as re}from"./index-nM6x0V_9.js";import{Q as w,a as $,b as _,c as I,d as F,C as J,e as P,f as ie,g as X,h as de,i as ue}from"./ClosePopup-DV86Kdmb.js";import{Q as H}from"./QInput-kvDFxS0E.js";import{g as k,Q as M}from"./QItem-Cv3fCkDt.js";import{Q as ee}from"./QFile-CtW7Ch3u.js";import{Q as K}from"./QCard-ChLmSgGd.js";import{_ as E}from"./_plugin-vue_export-helper-CtacDDMP.js";import"./selection-CMmYfeF9.js";const A=[];for(let n=0;n<1e5;n++){let e=n.toString();A.push(e.padStart(8,"0"))}const y=[];for(let n=0;n<1e5;n++)y.push("User"+n);const me=["Open","Close"],ce=["TOP-UP","HOW TOs"],pe={setup(){const n=r(y),e=r(A),d=r(""),t=r(""),u=r(""),c=r(""),a=r("");return{onSubmit:()=>{U.create({message:"Form submitted successfully!",color:"green-4",icon:"check_circle",position:"top"}),F.emit("closeAddForm",!1,"submit")},onCancel:()=>{U.create({message:"Form was cancelled!",color:"red-4",icon:"cancel",position:"top"}),F.emit("closeAddForm",!1,"cancel")},attachment:a,messagetext:c,messageStatus:d,users:t,chatnumber:u,chatnumberOption:e,messageStatusOption:me,usersOption:n,inquiryOption:r(ce),userFilterFn(l,i){setTimeout(()=>{i(()=>{if(l==="")n.value=y;else{const m=l.toLowerCase();n.value=y.filter(f=>f.toLowerCase().indexOf(m)>-1)}})},1500)},userAbortFilterFn(){},chatnumberFilterFn(l,i){setTimeout(()=>{i(()=>{if(l==="")e.value=A;else{const m=l.toLowerCase();e.value=A.filter(f=>f.toLowerCase().indexOf(m)>-1)}})},1500)},chatnumberAbortFilterFn(){}}}};function fe(n,e,d,t,u,c){return Q(),j(K,{style:{"min-width":"350px"}},{default:s(()=>[o(w,null,{default:s(()=>[...e[6]||(e[6]=[h("div",{class:"text-h6"},"Messages",-1)])]),_:1}),o($,{onSubmit:t.onSubmit,class:"q-gutter-md"},{default:s(()=>[o(w,{class:"q-pt-none"},{default:s(()=>[o(_,{modelValue:t.chatnumber,"onUpdate:modelValue":e[0]||(e[0]=a=>t.chatnumber=a),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",label:"Chat Number",options:t.chatnumberOption,onFilter:t.chatnumberFilterFn,onFilterAbort:t.chatnumberAbortFilterFn},{"no-option":s(()=>[o(k,null,{default:s(()=>[o(M,{class:"text-grey"},{default:s(()=>[...e[7]||(e[7]=[g(" No results ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","onFilterAbort"]),o(_,{modelValue:t.users,"onUpdate:modelValue":e[1]||(e[1]=a=>t.users=a),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",label:"Users",options:t.usersOption,onFilter:t.userFilterFn,onFilterAbort:t.userAbortFilterFn},{"no-option":s(()=>[o(k,null,{default:s(()=>[o(M,{class:"text-grey"},{default:s(()=>[...e[8]||(e[8]=[g(" No results ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","onFilterAbort"]),o(H,{modelValue:t.messagetext,"onUpdate:modelValue":e[2]||(e[2]=a=>t.messagetext=a),"filled-input":"",autogrow:"",label:"Message Text",type:"textarea"},null,8,["modelValue"]),o(ee,{"filled-input":"","bottom-slots":"",modelValue:t.attachment,"onUpdate:modelValue":e[5]||(e[5]=a=>t.attachment=a),label:"Message Photo",counter:""},{prepend:s(()=>[o(x,{name:"cloud_upload",onClick:e[3]||(e[3]=O(()=>{},["stop","prevent"]))})]),append:s(()=>[o(x,{name:"close",onClick:e[4]||(e[4]=O(a=>t.attachment=null,["stop","prevent"])),class:"cursor-pointer"})]),hint:s(()=>[...e[9]||(e[9]=[g(" Field hint ",-1)])]),_:1},8,["modelValue"])]),_:1}),o(I,{align:"right",class:"text-primary"},{default:s(()=>[o(p,{flat:"",label:"Cancel",onClick:t.onCancel},null,8,["onClick"]),o(p,{flat:"",label:"Submit",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})}const be=E(pe,[["render",fe]]),D=[];for(let n=0;n<1e5;n++){let e=n.toString();D.push(e.padStart(8,"0"))}const S=[];for(let n=0;n<1e5;n++)S.push("User"+n);const ge=["TOP-UP","HOW TOs"],Fe={props:{propsEditData:{type:Object,required:!1}},setup(n){const e=r(S),d=r(D),t=r(n.propsEditData.user),u=r(n.propsEditData.chatnumber),c=r(n.propsEditData.messagetext),a=r(n.propsEditData.messagephoto);return{onSubmit:()=>{U.create({message:"Form submitted successfully!",color:"green-4",icon:"check_circle",position:"top"}),F.emit("closeEditForm",!1,"submit")},onCancel:()=>{U.create({message:"Form was cancelled!",color:"red-4",icon:"cancel",position:"top"}),F.emit("closeEditForm",!1,"cancel")},attachment:a,messagetext:c,users:t,chatnumber:u,chatnumberOption:d,usersOption:e,inquiryOption:r(ge),userFilterFn(l,i){setTimeout(()=>{i(()=>{if(l==="")e.value=S;else{const m=l.toLowerCase();e.value=S.filter(f=>f.toLowerCase().indexOf(m)>-1)}})},1500)},userAbortFilterFn(){},chatnumberFilterFn(l,i){setTimeout(()=>{i(()=>{if(l==="")d.value=D;else{const m=l.toLowerCase();d.value=D.filter(f=>f.toLowerCase().indexOf(m)>-1)}})},1500)},chatnumberAbortFilterFn(){}}}};function he(n,e,d,t,u,c){return Q(),j(K,{style:{"min-width":"350px"}},{default:s(()=>[o(w,null,{default:s(()=>[...e[6]||(e[6]=[h("div",{class:"text-h6"},"Messages",-1)])]),_:1}),o($,{onSubmit:t.onSubmit,class:"q-gutter-md"},{default:s(()=>[o(w,{class:"q-pt-none"},{default:s(()=>[o(_,{modelValue:t.chatnumber,"onUpdate:modelValue":e[0]||(e[0]=a=>t.chatnumber=a),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",label:"Chat Number",options:t.chatnumberOption,onFilter:t.chatnumberFilterFn,onFilterAbort:t.chatnumberAbortFilterFn},{"no-option":s(()=>[o(k,null,{default:s(()=>[o(M,{class:"text-grey"},{default:s(()=>[...e[7]||(e[7]=[g(" No results ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","onFilterAbort"]),o(_,{modelValue:t.users,"onUpdate:modelValue":e[1]||(e[1]=a=>t.users=a),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",label:"Users",options:t.usersOption,onFilter:t.userFilterFn,onFilterAbort:t.userAbortFilterFn},{"no-option":s(()=>[o(k,null,{default:s(()=>[o(M,{class:"text-grey"},{default:s(()=>[...e[8]||(e[8]=[g(" No results ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","onFilterAbort"]),o(H,{modelValue:t.messagetext,"onUpdate:modelValue":e[2]||(e[2]=a=>t.messagetext=a),"filled-input":"",autogrow:"",label:"Message Text",type:"textarea"},null,8,["modelValue"]),o(ee,{"filled-input":"","bottom-slots":"",modelValue:t.attachment,"onUpdate:modelValue":e[5]||(e[5]=a=>t.attachment=a),label:"Message Photo",counter:""},{prepend:s(()=>[o(x,{name:"cloud_upload",onClick:e[3]||(e[3]=O(()=>{},["stop","prevent"]))})]),append:s(()=>[o(x,{name:"close",onClick:e[4]||(e[4]=O(a=>t.attachment=null,["stop","prevent"])),class:"cursor-pointer"})]),hint:s(()=>[...e[9]||(e[9]=[g(" Field hint ",-1)])]),_:1},8,["modelValue"])]),_:1}),o(I,{align:"right",class:"text-primary"},{default:s(()=>[o(p,{flat:"",label:"Cancel",onClick:t.onCancel},null,8,["onClick"]),o(p,{flat:"",label:"Submit",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})}const xe=E(Fe,[["render",he]]),we={props:{propsDeleteData:{type:Object,required:!1}},mounted(){},setup(){return{}}},Ce={class:"q-ml-sm"};function Ve(n,e,d,t,u,c){return Q(),j(K,null,{default:s(()=>[o(w,{class:"row items-center"},{default:s(()=>[o(le,{icon:"cancel",color:"negative","text-color":"white"}),h("span",Ce,"You are deleting Chat Number: "+se(d.propsDeleteData.chatnumber)+".",1)]),_:1}),o(I,{align:"right"},{default:s(()=>[G(o(p,{flat:"",label:"Cancel",color:"primary"},null,512),[[J]]),G(o(p,{flat:"",label:"Delete",color:"negative"},null,512),[[J]])]),_:1})]),_:1})}const ve=E(we,[["render",Ve]]),Ae=[{name:"chatnumber",align:"center",label:"Chat Number",field:"chatnumber",sortable:!0},{name:"user",label:"User",field:"user",sortable:!0},{name:"messagetext",label:"Message Text",field:"messagetext",sortable:!0},{name:"messagephoto",label:"Message Photo",field:"messagephoto",sortable:!0},{name:"messagestatus",label:"Message Status",field:"messagestatus",sortable:!0},{name:"createddate",label:"Created Date",field:"createddate",sortable:!0},{name:"updateddate",label:"Updated Date",field:"updateddate",sortable:!0},{name:"action",label:"Action",field:"action",sortable:!0}],ye=[{chatnumber:"0000000001",user:"User1",messagetext:"Hello",messagephoto:"./photo.jpg",messagestatus:"Sent",createddate:"2026/01/08",updateddate:"2026/01/04",action:""},{chatnumber:"0000000002",user:"User2",messagetext:"Good Morning",messagephoto:"./photo.jpg",messagestatus:"Error",createddate:"2026/01/08",updateddate:"2026/01/04",action:""},{chatnumber:"0000000003",user:"User2",messagetext:"Hi again",messagephoto:"./photo.jpg",messagestatus:"Deleted",createddate:"2026/01/08",updateddate:"2026/01/04",action:""}],Y=r(!1),B=r(!1),Z=r(!1),De=r(null),Se={components:{AdminMessageFormDelete:ve,AdminMessageFormAdd:be,AdminMessageFormEdit:xe},mounted(){F.on("closeEditForm",(n,e)=>{B.value=n,console.log("Event Bus",n)}),F.on("closeAddForm",(n,e)=>{Y.value=n,console.log("Event Bus",n)})},setup(){const n=r(!1),e=r(),d=r([]),t=r(""),u=r({}),c=r({});let a;return{deleteSelect:De,showAddForm:Y,showEditForm:B,showDeleteForm:Z,propsEditData:u,propsDeleteData:c,editRow:l=>{u.value.chatnumber=l.chatnumber,u.value.user=l.user,u.value.messagetext=l.messagetext,u.value.messagephoto=l.messagephoto,B.value=!0},deleteRow:l=>{c.value.chatnumber=l.chatnumber,Z.value=!0},loading:n,tableRef:e,selected:d,columns:Ae,rows:ye,filter:t,handleSelection({rows:l,added:i,evt:m}){if(l.length!==1||m===void 0)return;const f=a,[R]=l,{ctrlKey:te,shiftKey:W,metaKey:oe}=m;W!==!0&&(a=R),ae(()=>{if(W===!0){const q=e.value.filteredSortedRows;let b=q.indexOf(f),v=q.indexOf(R);b<0&&(b=0),b>v&&([b,v]=[v,b]);const z=q.slice(b,v+1),T=d.value.map(re);d.value=i===!0?T.concat(z.filter(L=>T.includes(L)===!1)):T.filter(L=>z.includes(L)===!1)}else(te||oe)!==!0&&i===!0&&(d.value=[R])})}}}},Oe={class:"flex"},Ue={class:"q-pa-sm"},_e={class:"q-pa-sm",style:{width:"100%"}};function ke(n,e,d,t,u,c){const a=N("AdminMessageFormEdit"),C=N("AdminMessageFormAdd"),V=N("AdminMessageFormDelete");return Q(),ne("div",Oe,[h("div",Ue,[o(p,{label:"Add Message",color:"primary",onClick:e[0]||(e[0]=l=>t.showAddForm=!0)})]),o(P,{modelValue:t.showEditForm,"onUpdate:modelValue":e[1]||(e[1]=l=>t.showEditForm=l),persistent:"",maximize:"true"},{default:s(()=>[o(a,{propsEditData:t.propsEditData},null,8,["propsEditData"])]),_:1},8,["modelValue"]),o(P,{modelValue:t.showAddForm,"onUpdate:modelValue":e[2]||(e[2]=l=>t.showAddForm=l),persistent:""},{default:s(()=>[o(C)]),_:1},8,["modelValue"]),o(P,{modelValue:t.showDeleteForm,"onUpdate:modelValue":e[3]||(e[3]=l=>t.showDeleteForm=l),persistent:""},{default:s(()=>[o(V,{propsDeleteData:t.propsDeleteData},null,8,["propsDeleteData"])]),_:1},8,["modelValue"]),h("div",_e,[o(ue,{flat:"",bordered:"",ref:"tableRef",title:"Message List",rows:t.rows,columns:t.columns,loading:t.loading,filter:t.filter,"row-key":"chatnumber",selection:"multiple",selected:t.selected,"onUpdate:selected":e[5]||(e[5]=l=>t.selected=l),onSelection:t.handleSelection},{top:s(()=>[o(p,{color:"negative",disable:t.loading,label:"Delete",onClick:t.deleteSelect},null,8,["disable","onClick"]),o(de),o(H,{borderless:"",dense:"",debounce:"300",color:"primary",modelValue:t.filter,"onUpdate:modelValue":e[4]||(e[4]=l=>t.filter=l),placeholder:"Search"},{append:s(()=>[o(x,{name:"search"})]),_:1},8,["modelValue"])]),"header-selection":s(l=>[o(X,{modelValue:l.selected,"onUpdate:modelValue":i=>l.selected=i},null,8,["modelValue","onUpdate:modelValue"])]),"body-selection":s(l=>[o(X,{"model-value":l.selected,"onUpdate:modelValue":(i,m)=>{Object.getOwnPropertyDescriptor(l,"selected").set(i,m)}},null,8,["model-value","onUpdate:modelValue"])]),"body-cell-action":s(l=>[o(ie,{props:l},{default:s(()=>[o(p,{dense:"",round:"",flat:"",icon:"edit",onClick:i=>t.editRow(l.row),color:"primary",class:"q-ml-sm"},null,8,["onClick"]),o(p,{dense:"",round:"",flat:"",icon:"delete",onClick:i=>t.deleteRow(l.row),color:"negative",class:"q-ml-sm"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading","filter","selected","onSelection"])])])}const Pe=E(Se,[["render",ke]]);export{Pe as default};
