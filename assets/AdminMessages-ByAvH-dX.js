import{g as he,r as c,a as C,X as Ae,Y as xe,Z as De,h as N,c as Oe,_ as _e,$ as ke,a0 as Ue,x as se,y as $,z as s,B as n,L as P,C as q,Q as R,a1 as Y,M as w,U as X,V as Me,D as Ne,k as me,K as ne,J as Ee,n as Te,W as qe}from"./index-C9o-NAtO.js";import{k as Qe,Q as j,a as ye,b as G,c as ie,d as re,e as Q,C as fe,f as oe,g as pe,h as be,i as ze,j as Pe}from"./ClosePopup-BKd_YdRa.js";import{u as Re,a as je,b as Ie,c as Le,d as Be,e as Ke,f as ge,g as We,Q as ue}from"./QInput-BGNKfkO0.js";import{g as J,Q as Z}from"./QItem-BpQE3HI1.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./selection-CRWalK3_.js";function T(t,e,g,l){const r=[];return t.forEach(m=>{l(m)===!0?r.push(m):e.push({failedPropValidation:g,file:m})}),r}function L(t){t?.dataTransfer&&(t.dataTransfer.dropEffect="copy"),xe(t)}const He={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Ye=["rejected"];function Xe({editable:t,dnd:e,getFileInput:g,addFilesToQueue:l}){const{props:r,emit:m,proxy:i}=he(),S=c(null),D=C(()=>r.accept!==void 0?r.accept.split(",").map(a=>(a=a.trim(),a==="*"?"*/":(a.endsWith("/*")&&(a=a.slice(0,a.length-1)),a.toUpperCase()))):null),o=C(()=>parseInt(r.maxFiles,10)),b=C(()=>parseInt(r.maxTotalSize,10));function v(a){if(t.value)if(a!==Object(a)&&(a={target:null}),a.target?.matches('input[type="file"]')===!0)a.clientX===0&&a.clientY===0&&Ae(a);else{const h=g();h!==a.target&&h?.click(a)}}function x(a){t.value&&a&&l(null,a)}function U(a,h,_,O){let u=Array.from(h||a.target.files);const V=[],k=()=>{V.length!==0&&m("rejected",V)};if(r.accept!==void 0&&D.value.indexOf("*/")===-1&&(u=T(u,V,"accept",f=>D.value.some(F=>f.type.toUpperCase().startsWith(F)||f.name.toUpperCase().endsWith(F))),u.length===0))return k();if(r.maxFileSize!==void 0){const f=parseInt(r.maxFileSize,10);if(u=T(u,V,"max-file-size",F=>F.size<=f),u.length===0)return k()}if(r.multiple!==!0&&u.length!==0&&(u=[u[0]]),u.forEach(f=>{f.__key=f.webkitRelativePath+f.lastModified+f.name+f.size}),O===!0){const f=_.map(F=>F.__key);u=T(u,V,"duplicate",F=>f.includes(F.__key)===!1)}if(u.length===0)return k();if(r.maxTotalSize!==void 0){let f=O===!0?_.reduce((F,te)=>F+te.size,0):0;if(u=T(u,V,"max-total-size",F=>(f+=F.size,f<=b.value)),u.length===0)return k()}if(typeof r.filter=="function"){const f=r.filter(u);u=T(u,V,"filter",F=>f.includes(F))}if(r.maxFiles!==void 0){let f=O===!0?_.length:0;if(u=T(u,V,"max-files",()=>(f++,f<=o.value)),u.length===0)return k()}if(k(),u.length!==0)return u}function z(a){L(a),e.value!==!0&&(e.value=!0)}function p(a){xe(a),(a.relatedTarget!==null||De.is.safari!==!0?a.relatedTarget!==S.value:document.elementsFromPoint(a.clientX,a.clientY).includes(S.value)===!1)===!0&&(e.value=!1)}function E(a){L(a);const h=a.dataTransfer.files;h.length!==0&&l(null,h),e.value=!1}function M(a){if(e.value===!0)return N("div",{ref:S,class:`q-${a}__dnd absolute-full`,onDragenter:L,onDragover:L,onDragleave:p,onDrop:E})}return Object.assign(i,{pickFiles:v,addFiles:x}),{pickFiles:v,addFiles:x,onDragover:z,onDragleave:p,processFiles:U,getDndNode:M,maxFilesNumber:o,maxTotalSizeNumber:b}}const Ce=Oe({name:"QFile",inheritAttrs:!1,props:{...Ie,...je,...He,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Re,...Ye],setup(t,{slots:e,emit:g,attrs:l}){const{proxy:r}=he(),m=Le(),i=c(null),S=c(!1),D=Be(t),{pickFiles:o,onDragover:b,onDragleave:v,processFiles:x,getDndNode:U}=Xe({editable:m.editable,dnd:S,getFileInput:de,addFilesToQueue:ce}),z=Ke(t),p=C(()=>Object(t.modelValue)===t.modelValue?"length"in t.modelValue?Array.from(t.modelValue):[t.modelValue]:[]),E=C(()=>ge(p.value)),M=C(()=>p.value.map(d=>d.name).join(", ")),a=C(()=>_e(p.value.reduce((d,y)=>d+y.size,0))),h=C(()=>({totalSize:a.value,filesNumber:p.value.length,maxFiles:t.maxFiles})),_=C(()=>({tabindex:-1,type:"file",title:"",accept:t.accept,capture:t.capture,name:D.value,...l,id:m.targetUid.value,disabled:m.editable.value!==!0})),O=C(()=>"q-file q-field--auto-height"+(S.value===!0?" q-file--dnd":"")),u=C(()=>t.multiple===!0&&t.append===!0);function V(d){const y=p.value.slice();y.splice(d,1),f(y)}function k(d){const y=p.value.indexOf(d);y!==-1&&V(y)}function f(d){g("update:modelValue",t.multiple===!0?d:d[0])}function F(d){d.keyCode===13&&Ue(d)}function te(d){(d.keyCode===13||d.keyCode===32)&&o(d)}function de(){return i.value}function ce(d,y){const A=x(d,y,p.value,u.value),le=de();le!=null&&(le.value=""),A!==void 0&&((t.multiple===!0?t.modelValue&&A.every(we=>p.value.includes(we)):t.modelValue===A[0])||f(u.value===!0?p.value.concat(A):A))}function I(){return[N("input",{class:[t.inputClass,"q-file__filler"],style:t.inputStyle})]}function Ve(){if(e.file!==void 0)return p.value.length===0?I():p.value.map((y,A)=>e.file({index:A,file:y,ref:this}));if(e.selected!==void 0)return p.value.length===0?I():e.selected({files:p.value,ref:this});if(t.useChips===!0)return p.value.length===0?I():p.value.map((y,A)=>N(Qe,{key:"file-"+A,removable:m.editable.value,dense:!0,textColor:t.color,tabindex:t.tabindex,onRemove:()=>{V(A)}},()=>N("span",{class:"ellipsis",textContent:y.name})));const d=t.displayValue!==void 0?t.displayValue:M.value;return d.length!==0?[N("div",{class:t.inputClass,style:t.inputStyle,textContent:d})]:I()}function Se(){const d={ref:i,..._.value,...z.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:ce};return t.multiple===!0&&(d.multiple=!0),N("input",d)}return Object.assign(m,{fieldClass:O,emitValue:f,hasValue:E,inputRef:i,innerValue:p,floatingLabel:C(()=>E.value===!0||ge(t.displayValue)),computedCounter:C(()=>{if(t.counterLabel!==void 0)return t.counterLabel(h.value);const d=t.maxFiles;return`${p.value.length}${d!==void 0?" / "+d:""} (${a.value})`}),getControlChild:()=>U("file"),getControl:()=>{const d={ref:m.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:t.tabindex};return m.editable.value===!0&&Object.assign(d,{onDragover:b,onDragleave:v,onKeydown:F,onKeyup:te}),N("div",d,[Se()].concat(Ve()))}}),Object.assign(r,{removeAtIndex:V,removeFile:k,getNativeElement:()=>i.value}),ke(r,"nativeEl",()=>i.value),We(m)}}),B=[];for(let t=0;t<1e5;t++)B.push(t);const K=[];for(let t=0;t<1e5;t++)K.push("User"+t);const Ge=["Open","Close"],Je=["TOP-UP","HOW TOs"],Ze={setup(){const t=c(K),e=c(B),g=c(""),l=c(""),r=c(""),m=c(""),i=c("");return{onSubmit:()=>{X.create({message:"Form submitted successfully!",color:"green-4",icon:"check_circle",position:"top"}),Q.emit("closeAddForm",!1,"submit")},onCancel:()=>{X.create({message:"Form was cancelled!",color:"red-4",icon:"cancel",position:"top"}),Q.emit("closeAddForm",!1,"cancel")},attachment:i,messagetext:m,messageStatus:g,users:l,chatnumber:r,chatnumberOption:e,messageStatusOption:Ge,usersOption:t,inquiryOption:c(Je),userFilterFn(o,b){setTimeout(()=>{b(()=>{if(o==="")t.value=K;else{const v=o.toLowerCase();t.value=K.filter(x=>x.toLowerCase().indexOf(v)>-1)}})},1500)},userAbortFilterFn(){},chatnumberFilterFn(o,b){setTimeout(()=>{b(()=>{if(o==="")e.value=B;else{const v=o.toLowerCase();e.value=B.filter(x=>x.toLowerCase().indexOf(v)>-1)}})},1500)},chatnumberAbortFilterFn(){}}}};function $e(t,e,g,l,r,m){return $(),se(re,{style:{"min-width":"350px"}},{default:s(()=>[n(j,null,{default:s(()=>[...e[6]||(e[6]=[P("div",{class:"text-h6"},"Messages",-1)])]),_:1}),n(ye,{onSubmit:l.onSubmit,class:"q-gutter-md"},{default:s(()=>[n(j,{class:"q-pt-none"},{default:s(()=>[n(G,{modelValue:l.chatnumber,"onUpdate:modelValue":e[0]||(e[0]=i=>l.chatnumber=i),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",label:"Chat Number",options:l.chatnumberOption,onFilter:l.chatnumberFilterFn,onFilterAbort:l.chatnumberAbortFilterFn},{"no-option":s(()=>[n(J,null,{default:s(()=>[n(Z,{class:"text-grey"},{default:s(()=>[...e[7]||(e[7]=[q(" No results ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","onFilterAbort"]),n(G,{modelValue:l.users,"onUpdate:modelValue":e[1]||(e[1]=i=>l.users=i),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",label:"Users",options:l.usersOption,onFilter:l.userFilterFn,onFilterAbort:l.userAbortFilterFn},{"no-option":s(()=>[n(J,null,{default:s(()=>[n(Z,{class:"text-grey"},{default:s(()=>[...e[8]||(e[8]=[q(" No results ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","onFilterAbort"]),n(ue,{modelValue:l.messagetext,"onUpdate:modelValue":e[2]||(e[2]=i=>l.messagetext=i),"filled-input":"",autogrow:"",label:"Message Text",type:"textarea"},null,8,["modelValue"]),n(Ce,{"filled-input":"","bottom-slots":"",modelValue:l.attachment,"onUpdate:modelValue":e[5]||(e[5]=i=>l.attachment=i),label:"Message Photo",counter:""},{prepend:s(()=>[n(R,{name:"cloud_upload",onClick:e[3]||(e[3]=Y(()=>{},["stop","prevent"]))})]),append:s(()=>[n(R,{name:"close",onClick:e[4]||(e[4]=Y(i=>l.attachment=null,["stop","prevent"])),class:"cursor-pointer"})]),hint:s(()=>[...e[9]||(e[9]=[q(" Field hint ",-1)])]),_:1},8,["modelValue"])]),_:1}),n(ie,{align:"right",class:"text-primary"},{default:s(()=>[n(w,{flat:"",label:"Cancel",onClick:l.onCancel},null,8,["onClick"]),n(w,{flat:"",label:"Submit",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})}const et=ee(Ze,[["render",$e]]),W=[];for(let t=0;t<1e5;t++)W.push(t);const H=[];for(let t=0;t<1e5;t++)H.push("User"+t);const tt=["Open","Close"],lt=["TOP-UP","HOW TOs"],nt={setup(){const t=c(H),e=c(W),g=c(""),l=c(""),r=c(""),m=c(""),i=c("");return{onSubmit:()=>{X.create({message:"Form submitted successfully!",color:"green-4",icon:"check_circle",position:"top"}),Q.emit("closeEditForm",!1,"submit")},onCancel:()=>{X.create({message:"Form was cancelled!",color:"red-4",icon:"cancel",position:"top"}),Q.emit("closeEditForm",!1,"cancel")},attachment:i,messagetext:m,messageStatus:g,users:l,chatnumber:r,chatnumberOption:e,messageStatusOption:tt,usersOption:t,inquiryOption:c(lt),userFilterFn(o,b){setTimeout(()=>{b(()=>{if(o==="")t.value=H;else{const v=o.toLowerCase();t.value=H.filter(x=>x.toLowerCase().indexOf(v)>-1)}})},1500)},userAbortFilterFn(){},chatnumberFilterFn(o,b){setTimeout(()=>{b(()=>{if(o==="")e.value=W;else{const v=o.toLowerCase();e.value=W.filter(x=>x.toLowerCase().indexOf(v)>-1)}})},1500)},chatnumberAbortFilterFn(){}}}};function ot(t,e,g,l,r,m){return $(),se(re,{style:{"min-width":"350px"}},{default:s(()=>[n(j,null,{default:s(()=>[...e[6]||(e[6]=[P("div",{class:"text-h6"},"Messages",-1)])]),_:1}),n(ye,{onSubmit:l.onSubmit,class:"q-gutter-md"},{default:s(()=>[n(j,{class:"q-pt-none"},{default:s(()=>[n(G,{modelValue:l.chatnumber,"onUpdate:modelValue":e[0]||(e[0]=i=>l.chatnumber=i),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",label:"Chat Number",options:l.chatnumberOption,onFilter:l.chatnumberFilterFn,onFilterAbort:l.chatnumberAbortFilterFn},{"no-option":s(()=>[n(J,null,{default:s(()=>[n(Z,{class:"text-grey"},{default:s(()=>[...e[7]||(e[7]=[q(" No results ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","onFilterAbort"]),n(G,{modelValue:l.users,"onUpdate:modelValue":e[1]||(e[1]=i=>l.users=i),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",label:"Users",options:l.usersOption,onFilter:l.userFilterFn,onFilterAbort:l.userAbortFilterFn},{"no-option":s(()=>[n(J,null,{default:s(()=>[n(Z,{class:"text-grey"},{default:s(()=>[...e[8]||(e[8]=[q(" No results ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","onFilterAbort"]),n(ue,{modelValue:l.messagetext,"onUpdate:modelValue":e[2]||(e[2]=i=>l.messagetext=i),"filled-input":"",autogrow:"",label:"Message Text",type:"textarea"},null,8,["modelValue"]),n(Ce,{"filled-input":"","bottom-slots":"",modelValue:l.attachment,"onUpdate:modelValue":e[5]||(e[5]=i=>l.attachment=i),label:"Message Photo",counter:""},{prepend:s(()=>[n(R,{name:"cloud_upload",onClick:e[3]||(e[3]=Y(()=>{},["stop","prevent"]))})]),append:s(()=>[n(R,{name:"close",onClick:e[4]||(e[4]=Y(i=>l.attachment=null,["stop","prevent"])),class:"cursor-pointer"})]),hint:s(()=>[...e[9]||(e[9]=[q(" Field hint ",-1)])]),_:1},8,["modelValue"])]),_:1}),n(ie,{align:"right",class:"text-primary"},{default:s(()=>[n(w,{flat:"",label:"Cancel",onClick:l.onCancel},null,8,["onClick"]),n(w,{flat:"",label:"Submit",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})}const at=ee(nt,[["render",ot]]),st={props:{propsDeleteData:{type:Object,required:!1}},mounted(){},setup(){return{}}},it={class:"q-ml-sm"};function rt(t,e,g,l,r,m){return $(),se(re,null,{default:s(()=>[n(j,{class:"row items-center"},{default:s(()=>[n(Me,{icon:"cancel",color:"negative","text-color":"white"}),P("span",it,"You are deleting Chat Number: "+Ne(g.propsDeleteData.chatnumber)+".",1)]),_:1}),n(ie,{align:"right"},{default:s(()=>[me(n(w,{flat:"",label:"Cancel",color:"primary"},null,512),[[fe]]),me(n(w,{flat:"",label:"Delete",color:"negative"},null,512),[[fe]])]),_:1})]),_:1})}const ut=ee(st,[["render",rt]]),dt=[{name:"chatnumber",align:"center",label:"Chat Number",field:"chatnumber",sortable:!0},{name:"user",label:"User",field:"user",sortable:!0},{name:"messagetext",label:"Message Text",field:"messagetext",sortable:!0},{name:"messagephoto",label:"Message Photo",field:"messagephoto",sortable:!0},{name:"messagestatus",label:"Message Status",field:"messagestatus",sortable:!0},{name:"createddate",label:"Created Date",field:"createddate",sortable:!0},{name:"updateddate",label:"Updated Date",field:"updateddate",sortable:!0},{name:"action",label:"Action",field:"action",sortable:!0}],ct=[{chatnumber:"0000000001",user:"User1",messagetext:"Hello",messagephoto:"./photo.jpg",messagestatus:"Sent",createddate:"2026/01/08",updateddate:"2026/01/04",action:""},{chatnumber:"0000000002",user:"User2",messagetext:"Good Morning",messagephoto:"./photo.jpg",messagestatus:"Error",createddate:"2026/01/08",updateddate:"2026/01/04",action:""},{chatnumber:"0000000003",user:"User2",messagetext:"Hi again",messagephoto:"./photo.jpg",messagestatus:"Deleted",createddate:"2026/01/08",updateddate:"2026/01/04",action:""}],ve=c(!1),ae=c(!1),Fe=c(!1),mt=c(null),ft={components:{AdminMessageFormDelete:ut,AdminMessageFormAdd:et,AdminMessageFormEdit:at},mounted(){Q.on("closeEditForm",(t,e)=>{ae.value=t,console.log("Event Bus",t)}),Q.on("closeAddForm",(t,e)=>{ve.value=t,console.log("Event Bus",t)})},setup(){const t=c(!1),e=c(),g=c([]),l=c(""),r=c({}),m=c({});let i;return{deleteSelect:mt,showAddForm:ve,showEditForm:ae,showDeleteForm:Fe,propsEditData:r,propsDeleteData:m,editRow:o=>{r.value.chatnumber=o.chatnumber,r.value.inquiry=o.inquiry,r.value.chatby=o.chatby,r.value.chatstatus=o.chatstatus,ae.value=!0},deleteRow:o=>{m.value.chatnumber=o.chatnumber,Fe.value=!0},loading:t,tableRef:e,selected:g,columns:dt,rows:ct,filter:l,handleSelection({rows:o,added:b,evt:v}){if(o.length!==1||v===void 0)return;const x=i,[U]=o,{ctrlKey:z,shiftKey:p,metaKey:E}=v;p!==!0&&(i=U),Te(()=>{if(p===!0){const M=e.value.filteredSortedRows;let a=M.indexOf(x),h=M.indexOf(U);a<0&&(a=0),a>h&&([a,h]=[h,a]);const _=M.slice(a,h+1),O=g.value.map(qe);g.value=b===!0?O.concat(_.filter(u=>O.includes(u)===!1)):O.filter(u=>_.includes(u)===!1)}else(z||E)!==!0&&b===!0&&(g.value=[U])})}}}},pt={class:"flex"},bt={class:"q-pa-sm"},gt={class:"q-pa-sm",style:{width:"100%"}};function vt(t,e,g,l,r,m){const i=ne("AdminMessageFormEdit"),S=ne("AdminMessageFormAdd"),D=ne("AdminMessageFormDelete");return $(),Ee("div",pt,[P("div",bt,[n(w,{label:"Add Message",color:"primary",onClick:e[0]||(e[0]=o=>l.showAddForm=!0)})]),n(oe,{modelValue:l.showEditForm,"onUpdate:modelValue":e[1]||(e[1]=o=>l.showEditForm=o),persistent:"",maximize:"true"},{default:s(()=>[n(i,{propsEditData:l.propsEditData},null,8,["propsEditData"])]),_:1},8,["modelValue"]),n(oe,{modelValue:l.showAddForm,"onUpdate:modelValue":e[2]||(e[2]=o=>l.showAddForm=o),persistent:""},{default:s(()=>[n(S)]),_:1},8,["modelValue"]),n(oe,{modelValue:l.showDeleteForm,"onUpdate:modelValue":e[3]||(e[3]=o=>l.showDeleteForm=o),persistent:""},{default:s(()=>[n(D,{propsDeleteData:l.propsDeleteData},null,8,["propsDeleteData"])]),_:1},8,["modelValue"]),P("div",gt,[n(Pe,{flat:"",bordered:"",ref:"tableRef",title:"Message List",rows:l.rows,columns:l.columns,loading:l.loading,filter:l.filter,"row-key":"chatnumber",selection:"multiple",selected:l.selected,"onUpdate:selected":e[5]||(e[5]=o=>l.selected=o),onSelection:l.handleSelection},{top:s(()=>[n(w,{color:"negative",disable:l.loading,label:"Delete",onClick:l.deleteSelect},null,8,["disable","onClick"]),n(ze),n(ue,{borderless:"",dense:"",debounce:"300",color:"primary",modelValue:l.filter,"onUpdate:modelValue":e[4]||(e[4]=o=>l.filter=o),placeholder:"Search"},{append:s(()=>[n(R,{name:"search"})]),_:1},8,["modelValue"])]),"header-selection":s(o=>[n(be,{modelValue:o.selected,"onUpdate:modelValue":b=>o.selected=b},null,8,["modelValue","onUpdate:modelValue"])]),"body-selection":s(o=>[n(be,{"model-value":o.selected,"onUpdate:modelValue":(b,v)=>{Object.getOwnPropertyDescriptor(o,"selected").set(b,v)}},null,8,["model-value","onUpdate:modelValue"])]),"body-cell-chatnumber":s(o=>[n(pe,{props:o},{default:s(()=>[n(w,{unelevated:"",color:"primary",label:o.row.chatnumber,to:"message"},null,8,["label"])]),_:2},1032,["props"])]),"body-cell-action":s(o=>[n(pe,{props:o},{default:s(()=>[n(w,{dense:"",round:"",flat:"",icon:"edit",onClick:b=>l.editRow(o.row),color:"primary",class:"q-ml-sm"},null,8,["onClick"]),n(w,{dense:"",round:"",flat:"",icon:"delete",onClick:b=>l.deleteRow(o.row),color:"negative",class:"q-ml-sm"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading","filter","selected","onSelection"])])])}const St=ee(ft,[["render",vt]]);export{St as default};
