import{c as I,a as i,h as n,I as oe,k as L,r as c,g as ne,f as _,af as ie,w as X,a3 as se,ag as ue,o as ce,v as ve,J as me,y as he,L as de,B as m,z as R,M as ge}from"./index-B7zpzavd.js";import{u as fe,a as be,_ as ze}from"./_plugin-vue_export-helper-BVTrndgg.js";import{Q as E,a as Se,T as N}from"./QScrollObserver-OOFzUnCf.js";import{e as j,f as U}from"./selection-BFecER-_.js";import{Q as ye}from"./QInput-C6LgO5in.js";const S=I({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(e,{slots:s}){const d=i(()=>e.sent===!0?"sent":"received"),g=i(()=>`q-message-text-content q-message-text-content--${d.value}`+(e.textColor!==void 0?` text-${e.textColor}`:"")),z=i(()=>`q-message-text q-message-text--${d.value}`+(e.bgColor!==void 0?` text-${e.bgColor}`:"")),y=i(()=>"q-message-container row items-end no-wrap"+(e.sent===!0?" reverse":"")),r=i(()=>e.size!==void 0?`col-${e.size}`:""),t=i(()=>({msg:e.textHtml===!0?"innerHTML":"textContent",stamp:e.stampHtml===!0?"innerHTML":"textContent",name:e.nameHtml===!0?"innerHTML":"textContent",label:e.labelHtml===!0?"innerHTML":"textContent"}));function f(u){return s.stamp!==void 0?[u,n("div",{class:"q-message-stamp"},s.stamp())]:e.stamp?[u,n("div",{class:"q-message-stamp",[t.value.stamp]:e.stamp})]:[u]}function w(u,h){const v=h===!0?u.length>1?b=>b:b=>n("div",[b]):b=>n("div",{[t.value.msg]:b});return u.map((b,T)=>n("div",{key:T,class:z.value},[n("div",{class:g.value},f(v(b)))]))}return()=>{const u=[];s.avatar!==void 0?u.push(s.avatar()):e.avatar!==void 0&&u.push(n("img",{class:`q-message-avatar q-message-avatar--${d.value}`,src:e.avatar,"aria-hidden":"true"}));const h=[];s.name!==void 0?h.push(n("div",{class:`q-message-name q-message-name--${d.value}`},s.name())):e.name!==void 0&&h.push(n("div",{class:`q-message-name q-message-name--${d.value}`,[t.value.name]:e.name})),s.default!==void 0?h.push(w(oe(s.default()),!0)):e.text!==void 0&&h.push(w(e.text)),u.push(n("div",{class:r.value},h));const v=[];return s.label!==void 0?v.push(n("div",{class:"q-message-label"},s.label())):e.label!==void 0&&v.push(n("div",{class:"q-message-label",[t.value.label]:e.label})),v.push(n("div",{class:y.value},u)),n("div",{class:`q-message q-message-${d.value}`},v)}}}),qe=I({props:["store","barStyle","verticalBarStyle","horizontalBarStyle"],setup(e){return()=>[n("div",{class:e.store.scroll.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:e.store.onVerticalMousedown}),n("div",{class:e.store.scroll.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:e.store.onHorizontalMousedown}),L(n("div",{ref:e.store.scroll.vertical.ref,class:e.store.scroll.vertical.thumbClass.value,style:e.store.scroll.vertical.style.value,"aria-hidden":"true"}),e.store.thumbVertDir),L(n("div",{ref:e.store.scroll.horizontal.ref,class:e.store.scroll.horizontal.thumbClass.value,style:e.store.scroll.horizontal.style.value,"aria-hidden":"true"}),e.store.thumbHorizDir)]}}),F=["vertical","horizontal"],B={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},J={prevent:!0,mouse:!0,mouseAllDir:!0},Y=e=>e>=250?50:Math.ceil(e/5),xe=I({name:"QScrollArea",props:{...fe,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],verticalOffset:{type:Array,default:[0,0]},horizontalOffset:{type:Array,default:[0,0]},contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:s,emit:d}){const g=c(!1),z=c(!1),y=c(!1),r={vertical:c(0),horizontal:c(0)},t={vertical:{ref:c(null),position:c(0),size:c(0)},horizontal:{ref:c(null),position:c(0),size:c(0)}},{proxy:f}=ne(),w=be(e,f.$q);let u=null,h;const v=c(null),b=i(()=>"q-scrollarea"+(w.value===!0?" q-scrollarea--dark":""));Object.assign(r,{verticalInner:i(()=>r.vertical.value-e.verticalOffset[0]-e.verticalOffset[1]),horizontalInner:i(()=>r.horizontal.value-e.horizontalOffset[0]-e.horizontalOffset[1])}),t.vertical.percentage=i(()=>{const a=t.vertical.size.value-r.vertical.value;if(a<=0)return 0;const l=_(t.vertical.position.value/a,0,1);return Math.round(l*1e4)/1e4}),t.vertical.thumbHidden=i(()=>(e.visible===null?y.value:e.visible)!==!0&&g.value===!1&&z.value===!1||t.vertical.size.value<=r.vertical.value+1),t.vertical.thumbStart=i(()=>e.verticalOffset[0]+t.vertical.percentage.value*(r.verticalInner.value-t.vertical.thumbSize.value)),t.vertical.thumbSize=i(()=>Math.round(_(r.verticalInner.value*r.verticalInner.value/t.vertical.size.value,Y(r.verticalInner.value),r.verticalInner.value))),t.vertical.style=i(()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${t.vertical.thumbStart.value}px`,height:`${t.vertical.thumbSize.value}px`,right:`${e.horizontalOffset[1]}px`})),t.vertical.thumbClass=i(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(t.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),t.vertical.barClass=i(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(t.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),t.horizontal.percentage=i(()=>{const a=t.horizontal.size.value-r.horizontal.value;if(a<=0)return 0;const l=_(Math.abs(t.horizontal.position.value)/a,0,1);return Math.round(l*1e4)/1e4}),t.horizontal.thumbHidden=i(()=>(e.visible===null?y.value:e.visible)!==!0&&g.value===!1&&z.value===!1||t.horizontal.size.value<=r.horizontal.value+1),t.horizontal.thumbStart=i(()=>e.horizontalOffset[0]+t.horizontal.percentage.value*(r.horizontalInner.value-t.horizontal.thumbSize.value)),t.horizontal.thumbSize=i(()=>Math.round(_(r.horizontalInner.value*r.horizontalInner.value/t.horizontal.size.value,Y(r.horizontalInner.value),r.horizontalInner.value))),t.horizontal.style=i(()=>({...e.thumbStyle,...e.horizontalThumbStyle,[f.$q.lang.rtl===!0?"right":"left"]:`${t.horizontal.thumbStart.value}px`,width:`${t.horizontal.thumbSize.value}px`,bottom:`${e.verticalOffset[1]}px`})),t.horizontal.thumbClass=i(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(t.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),t.horizontal.barClass=i(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(t.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const T=i(()=>t.vertical.thumbHidden.value===!0&&t.horizontal.thumbHidden.value===!0?e.contentStyle:e.contentActiveStyle);function A(){const a={};return F.forEach(l=>{const o=t[l];Object.assign(a,{[l+"Position"]:o.position.value,[l+"Percentage"]:o.percentage.value,[l+"Size"]:o.size.value,[l+"ContainerSize"]:r[l].value,[l+"ContainerInnerSize"]:r[l+"Inner"].value})}),a}const P=ie(()=>{const a=A();a.ref=f,d("scroll",a)},0);function D(a,l,o){if(F.includes(a)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(a==="vertical"?U:j)(v.value,l,o)}function W({height:a,width:l}){let o=!1;r.vertical.value!==a&&(r.vertical.value=a,o=!0),r.horizontal.value!==l&&(r.horizontal.value=l,o=!0),o===!0&&C()}function Z({position:a}){let l=!1;t.vertical.position.value!==a.top&&(t.vertical.position.value=a.top,l=!0),t.horizontal.position.value!==a.left&&(t.horizontal.position.value=a.left,l=!0),l===!0&&C()}function ee({height:a,width:l}){t.horizontal.size.value!==l&&(t.horizontal.size.value=l,C()),t.vertical.size.value!==a&&(t.vertical.size.value=a,C())}function k(a,l){const o=t[l];if(a.isFirst===!0){if(o.thumbHidden.value===!0)return;h=o.position.value,z.value=!0}else if(z.value!==!0)return;a.isFinal===!0&&(z.value=!1);const x=B[l],p=(o.size.value-r[l].value)/(r[l+"Inner"].value-o.thumbSize.value),M=a.distance[x.dist],O=h+(a.direction===x.dir?1:-1)*M*p;V(O,l)}function Q(a,l){const o=t[l];if(o.thumbHidden.value!==!0){const x=l==="vertical"?e.verticalOffset[0]:e.horizontalOffset[0],p=a[B[l].offset]-x,M=o.thumbStart.value-x;if(p<M||p>M+o.thumbSize.value){const O=p-o.thumbSize.value/2,re=_(O/(r[l+"Inner"].value-o.thumbSize.value),0,1);V(re*Math.max(0,o.size.value-r[l].value),l)}o.ref.value!==null&&o.ref.value.dispatchEvent(new MouseEvent(a.type,a))}}function C(){g.value=!0,u!==null&&clearTimeout(u),u=setTimeout(()=>{u=null,g.value=!1},e.delay),e.onScroll!==void 0&&P()}function V(a,l){v.value[B[l].scroll]=a}let q=null;function te(){q!==null&&clearTimeout(q),q=setTimeout(()=>{q=null,y.value=!0},f.$q.platform.is.ios?50:0)}function ae(){q!==null&&(clearTimeout(q),q=null),y.value=!1}let H=null;X(()=>f.$q.lang.rtl,a=>{v.value!==null&&j(v.value,Math.abs(t.horizontal.position.value)*(a===!0?-1:1))}),se(()=>{H={top:t.vertical.position.value,left:t.horizontal.position.value}}),ue(()=>{if(H===null)return;const a=v.value;a!==null&&(j(a,H.left),U(a,H.top))}),ce(P.cancel),Object.assign(f,{getScrollTarget:()=>v.value,getScroll:A,getScrollPosition:()=>({top:t.vertical.position.value,left:t.horizontal.position.value}),getScrollPercentage:()=>({top:t.vertical.percentage.value,left:t.horizontal.percentage.value}),setScrollPosition:D,setScrollPercentage(a,l,o){D(a,l*(t[a].size.value-r[a].value)*(a==="horizontal"&&f.$q.lang.rtl===!0?-1:1),o)}});const le={scroll:t,thumbVertDir:[[N,a=>{k(a,"vertical")},void 0,{vertical:!0,...J}]],thumbHorizDir:[[N,a=>{k(a,"horizontal")},void 0,{horizontal:!0,...J}]],onVerticalMousedown(a){Q(a,"vertical")},onHorizontalMousedown(a){Q(a,"horizontal")}};return()=>n("div",{class:b.value,onMouseenter:te,onMouseleave:ae},[n("div",{ref:v,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:e.tabindex!==void 0?e.tabindex:void 0},[n("div",{class:"q-scrollarea__content absolute",style:T.value},ve(s.default,[n(E,{debounce:0,onResize:ee})])),n(Se,{axis:"both",onScroll:Z})]),n(E,{debounce:0,onResize:W}),n(qe,{store:le,barStyle:e.barStyle,verticalBarStyle:e.verticalBarStyle,horizontalBarStyle:e.horizontalBarStyle})])}}),pe=c(0),$=c(null),G=c("");X(G,async()=>{K()});const K=()=>{const s=$.value.getScrollTarget().scrollHeight;$.value.setScrollPosition("vertical",s,0)},_e={mounted(){K()},setup(){return{messagetext:G,position:pe,scrollAreaRef:$}}},we={class:"q-pa-md row justify-center"},Ce={style:{width:"100%"}};function He(e,s,d,g,z,y){return he(),me("div",we,[de("div",Ce,[m(xe,{ref:"scrollAreaRef",style:{height:"500px"}},{default:R(()=>[m(S,{name:"<span class='text-positive'>Untrusted Source</span>",avatar:"https://cdn.quasar.dev/img/avatar3.jpg",text:["hey, how are <strong>you</strong>?"],stamp:"7 minutes ago",sent:"","bg-color":"amber-7"}),m(S,{name:"<span class='text-positive'>Untrusted Source</span>",avatar:"https://cdn.quasar.dev/img/avatar3.jpg",text:["hey, how are <strong>you</strong>?"],stamp:"7 minutes ago",sent:"","bg-color":"amber-7"}),m(S,{name:"<span class='text-positive'>Untrusted Source</span>",avatar:"https://cdn.quasar.dev/img/avatar3.jpg",text:["hey, how are <strong>you</strong>?"],stamp:"7 minutes ago",sent:"","bg-color":"amber-7"}),m(S,{name:"<span class='text-negative'>Jane (trusted name but untrusted text)</span>","name-html":"",avatar:"https://cdn.quasar.dev/img/avatar5.jpg",text:["doing fine, how r you?","I just feel like typing a really, really, <strong>REALLY</strong> long message to annoy you..."],size:"6",stamp:"4 minutes ago","text-color":"white","bg-color":"primary"}),m(S,{name:"<image src='https://cdn.quasar.dev/img/lets-encrypt.jpg' />","name-html":"",avatar:"https://cdn.quasar.dev/img/avatar5.jpg",text:["<strong>Did it work?</strong>"],"text-html":"",stamp:"1 minutes ago",size:"8","text-color":"white","bg-color":"primary"}),m(S,{name:"<image src='https://cdn.quasar.dev/img/lets-encrypt.jpg' />","name-html":"",avatar:"https://cdn.quasar.dev/img/avatar5.jpg",text:["<strong>Did it work?</strong>"],"text-html":"",stamp:"1 minutes ago",size:"8","text-color":"white","bg-color":"primary"}),m(S,{name:"<image src='https://cdn.quasar.dev/img/lets-encrypt.jpg' />","name-html":"",avatar:"https://cdn.quasar.dev/img/avatar5.jpg",text:["<strong>Did it work?</strong>"],"text-html":"",stamp:"1 minutes ago",size:"8","text-color":"white","bg-color":"primary"}),m(S,{name:"<image src='https://cdn.quasar.dev/img/lets-encrypt.jpg' />","name-html":"",avatar:"https://cdn.quasar.dev/img/avatar5.jpg",text:["<strong>Did it work?</strong>"],"text-html":"",stamp:"1 minutes ago",size:"8","text-color":"white","bg-color":"primary"})]),_:1},512),m(ye,{modelValue:g.messagetext,"onUpdate:modelValue":s[0]||(s[0]=r=>g.messagetext=r),"filled-input":"",autogrow:"",size:"8",label:"Message Here...",type:"textarea"},{after:R(()=>[m(ge,{round:"",dense:"",flat:"",icon:"send"})]),_:1},8,["modelValue"])])])}const $e=ze(_e,[["render",He]]);export{$e as default};
